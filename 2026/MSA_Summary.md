# MSA(Microservice Architecture) 요약 과제

## 1. 오리엔테이션

### 1.1 MSA 등장 배경
- 모놀리식 아키텍처의 한계
    - 코드 결합도 증가
    - 부분 배포 불가
    - 기술 스택 변경 어려움
    - 대규모 트래픽 대응 시 전체 스케일링 필요
- 클라우드 네이티브 환경 확산
- DevOps, CI/CD 문화 확산

### 1.2 MSA의 핵심 목표
- 서비스 단위의 독립적 배포
- 비즈니스 중심의 서비스 분리
- 확장성과 장애 격리
- 기술 스택의 자율성

---

## 2. MSA 기본 개념

### 2.1 모놀리식 vs MSA 비교

| 구분 | 모놀리식 | MSA |
|------|----------|-----|
| 배포 단위 | 전체 애플리케이션 | 서비스 단위 |
| 확장 방식 | 전체 확장 | 필요한 서비스만 확장 |
| 장애 영향 | 전체 서비스 영향 | 특정 서비스에 국한 |
| 기술 스택 | 단일 | 서비스별 상이 가능 |

### 2.2 MSA의 특징
- 서비스 단위 독립성
- API 기반 통신 (REST, gRPC 등)
- 데이터베이스 분리
- 분산 환경 전제
- 자동화된 배포 및 운영

### 2.3 장점
- 확장성 향상
- 장애 격리
- 빠른 배포
- 팀 단위 자율성

### 2.4 단점
- 분산 시스템 복잡성 증가
- 네트워크 비용 증가
- 데이터 일관성 관리 어려움
- 운영 난이도 상승

---

## 3. Spring Cloud 개요

### 3.1 역할
- MSA 구현을 위한 공통 인프라 제공
- 서비스 간 통신, 설정 관리, 로드 밸런싱, 장애 대응 지원

### 3.2 주요 구성 요소
- 서비스 디스커버리
- 로드 밸런싱
- API Gateway
- 설정 서버
- Circuit Breaker
- 분산 추적

---

## 4. 서비스 디스커버리 (Service Discovery)

### 4.1 필요성
MSA 환경에서는 서비스 인스턴스가 동적으로 생성/삭제됨  
→ IP/Port 고정 불가  
→ 중앙 관리 필요

### 4.2 동작 방식
1. 서비스가 디스커버리 서버에 등록
2. 클라이언트가 서버에 서비스 위치 조회
3. 동적으로 통신

### 4.3 효과
- 자동 등록/해제
- 유연한 확장
- 클라우드 환경에 최적화

---

## 5. 로드 밸런싱 (Load Balancing)

### 5.1 개념
- 여러 인스턴스에 트래픽 분산
- 시스템 부하 균형 유지

### 5.2 방식
- Round Robin
- Random
- 가중치 기반
- 응답 시간 기반

### 5.3 MSA에서의 중요성
- 특정 서비스 인스턴스 과부하 방지
- 자동 확장과 연계

---

## 6. Circuit Breaker

### 6.1 필요성
- 한 서비스 장애가 전체 시스템 장애로 확산되는 것을 방지

### 6.2 상태
- Closed: 정상 호출
- Open: 호출 차단
- Half-Open: 일부 요청 테스트

### 6.3 기대 효과
- 장애 전파 방지
- 빠른 장애 감지
- 시스템 안정성 향상

---

## 7. API Gateway

### 7.1 역할
- 클라이언트의 단일 진입점
- 내부 서비스 라우팅
- 인증/인가 처리
- 로깅 및 모니터링

### 7.2 장점
- 클라이언트 단순화
- 공통 기능 중앙화
- 보안 강화

---

## 8. Config 서버 (Configuration Management)

### 8.1 필요성
- 서비스별 설정 외부화
- 환경별 설정 분리 (dev, test, prod)

### 8.2 장점
- 재배포 없이 설정 변경
- 중앙 집중 관리
- 보안 정보 보호

---

## 9. 보안 구성

### 9.1 주요 요소
- 인증(Authentication)
- 인가(Authorization)
- 토큰 기반 인증 (JWT 등)
- API Gateway 기반 보안 처리

### 9.2 보안 전략
- 서비스 간 통신 보안
- HTTPS 적용
- 토큰 검증 중앙화

---

## 10. 분산 추적 (Distributed Tracing)

### 10.1 필요성
- 요청이 여러 서비스를 거칠 경우 추적 어려움
- 장애 원인 파악 복잡

### 10.2 구성 요소
- Trace ID
- Span ID
- 로그 상관관계 추적

### 10.3 효과
- 성능 분석
- 병목 구간 식별
- 장애 원인 추적

---

## 11. 이벤트 드리븐 아키텍처 (Event-Driven Architecture)

### 11.1 개념
- 서비스 간 직접 호출 대신 이벤트 기반 통신
- 비동기 메시지 처리

### 11.2 장점
- 느슨한 결합
- 확장성 우수
- 장애 격리 강화

### 11.3 활용 예
- 주문 생성 → 결제 서비스 이벤트 수신
- 결제 완료 → 배송 서비스 이벤트 수신

---

## 12. MSA 도입 시 고려사항

### 12.1 조직 구조
- 서비스 단위 팀 구성 필요
- DevOps 문화 필수

### 12.2 데이터 관리
- 서비스별 DB 분리
- 데이터 일관성 전략 필요 (Eventual Consistency)

### 12.3 운영 자동화
- CI/CD 파이프라인 구축
- 모니터링 시스템 필수

---

## 13. 결론

MSA는 단순한 아키텍처 패턴이 아니라 **운영 방식과 조직 구조까지 포함하는 시스템 설계 철학**이다.

### 핵심 정리
- 서비스 단위 분리
- 독립 배포
- 분산 환경 전제
- 자동화된 운영 필수
- 장애 격리 구조

MSA는 대규모 서비스, 빠른 배포, 독립적인 팀 운영이 필요한 환경에서 강력한 아키텍처이며, 충분한 자동화와 운영 체계가 갖춰질 때 그 효과를 극대화할 수 있다.